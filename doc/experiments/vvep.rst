********************************
_
*********************************

Visual Evoked Potential (VEP)
=========================================================

Visual Evoked Potentials (VEPs) are electrical signals generated by the visual cortex in response to visual stimulation. They are widely used in clinical and research settings to assess the functional integrity of the visual pathways from the retina to the occipital cortex.

Pattern Reversal VEP
---------------------

The Pattern Reversal Visual Evoked Potential (PR-VEP) is the most commonly used VEP paradigm in clinical practice. It involves presenting a checkerboard pattern that alternates (reverses) between black and white squares at a regular rate, typically 2 Hz (twice per second). This elicits a characteristic positive potential called the **P100**, which occurs approximately 100ms after each pattern reversal.

The P100 Component
~~~~~~~~~~~~~~~~~~

The P100 is a large positive deflection in the EEG signal that is most prominent at occipital electrode sites (O1, Oz, O2) and can also be detected at parietal-occipital sites (PO3, POz, PO4). Key characteristics include:

- **Latency**: ~100ms after stimulus onset (typically 95-110ms in healthy adults)
- **Amplitude**: Variable, but typically 5-20 μV
- **Polarity**: Positive at occipital sites
- **Retinotopic**: Larger amplitude in the hemisphere contralateral to the stimulated eye

Clinical Applications
~~~~~~~~~~~~~~~~~~~~~

Pattern Reversal VEP is used to:

- **Assess visual pathway function**: Detect abnormalities in the optic nerve, chiasm, or visual cortex
- **Diagnose optic neuritis**: Common in multiple sclerosis, shows delayed P100 latency
- **Evaluate amblyopia**: Assess visual development in children
- **Monitor visual recovery**: Track improvements after treatment
- **Detect subclinical lesions**: Identify demyelinating diseases before symptoms appear

Standard Parameters
~~~~~~~~~~~~~~~~~~~

The implementation in EEG-ExPy follows international clinical standards (ISCEV):

- **Check size**: 1 degree of visual angle (0.5 cycles per degree)
- **Reversal rate**: 2 Hz (pattern reverses twice per second)
- **Field size**: 16-20 degrees of visual angle
- **Contrast**: High contrast black and white (≥80%)
- **Luminance**: Equal for black and white (mean luminance ~50 cd/m²)
- **Fixation**: Central red dot for stable gaze
- **Recording**: Monocular (one eye at a time) with blocks alternating between eyes

Experiment Design
~~~~~~~~~~~~~~~~~

This implementation supports both standard monitor-based and VR-based (Meta Quest) presentation:

**Monitor Mode**:
- Participants manually close one eye
- Standard viewing distance and check size
- Text instructions guide eye closure

**VR Mode**:
- Stereoscopic presentation with precise monocular control
- Non-stimulated eye sees black screen
- Optimized parameters for Meta Quest display characteristics
- Immersive experience reduces distractions

The experiment runs in blocks, alternating between left and right eye stimulation to enable monocular VEP measurements and assess each visual pathway independently.

**Visual VEP Experiment Examples:**

When example notebooks and scripts are available, they will appear here.

.. Note: Once example files are added to examples/visual_vep/, uncomment the line below
.. .. include:: ../auto_examples/visual_vep/index.rst

API Reference
~~~~~~~~~~~~~

.. automodule:: eegnb.experiments.visual_vep
   :members:
   :undoc-members:
   :show-inheritance:

.. autoclass:: eegnb.experiments.visual_vep.VisualPatternReversalVEP
   :members:
   :undoc-members:
   :show-inheritance:
